<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avantive Corporation</title>
    <link rel="stylesheet" href="password.css">
</head>
<body>
    <div class="container">
        <h2>Forgot Password</h2>
        <p class="subtitle">Enter your email address to reset your password</p>
        
        <form id="forgot-password-form">
            <label for="email">Email Address:</label>
            <input type="email" id="email" required placeholder="Enter your email" />
            <button type="submit">Reset Password</button>
        </form>
        
        <p id="message"></p>
        
        <div class="auth-link">
            <a href="signin.html">Back to Sign In</a>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyALYtZA7MPjXwureYYB633rsk0Ni_cYX1c",
            authDomain: "avantive-585f7.firebaseapp.com",
            projectId: "avantive-585f7",
            storageBucket: "avantive-585f7.firebasestorage.app",
            messagingSenderId: "582038622421",
            appId: "1:582038622421:web:ff9a784940c8806835925c",
            measurementId: "G-605P9B6L0Y"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        const form = document.getElementById("forgot-password-form");
        const message = document.getElementById("message");

        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const button = form.querySelector("button");

            button.disabled = true;
            button.textContent = "Sending...";
            message.textContent = "";

            sendPasswordResetEmail(auth, email)
                .then(() => {
                    message.textContent = "Password reset email sent! Check your inbox.";
                    message.style.color = "green";
                })
                .catch((error) => {
                    let errorMsg = "An error occurred. Please try again.";
                    switch (error.code) {
                        case "auth/invalid-email":
                            errorMsg = "Invalid email format.";
                            break;
                        case "auth/user-not-found":
                            errorMsg = "No account found with this email.";
                            break;
                        case "auth/too-many-requests":
                            errorMsg = "Too many attempts. Please try again later.";
                            break;
                        case "auth/network-request-failed":
                            errorMsg = "Network error. Please check your connection.";
                            break;
                    }
                    message.textContent = errorMsg;
                    message.style.color = "red";
                })
                .finally(() => {
                    button.disabled = false;
                    button.textContent = "Reset Password";
                });
        });
    </script>
</body>
</html>